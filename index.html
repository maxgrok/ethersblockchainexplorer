<html>
    <head>
        <title>Blockchain Explorer</title>
    </head>
    <body>
        <h1>Blockchain Explorer</h1>
        <table id="blocks" style="width:100%;">
            <tr>
                <th>Number</th>
                <th>Hash</th>
                <th>Timestamp</th>
            </tr>
        </table>
        <!-- exposes library as a global variable -->
        <script src="https://cdn.ethers.io/scripts/ethers-v3.min.js"
        charset="utf-8"
        type="text/javascript">
        </script>
        
        <script>
             var provider = new ethers.providers.getDefaultProvider();
             updateBlocks();

             function updateBlocks(){
                 let blockNumber = provider.getBlockNumber().then(function(blockNumber){
                     for(var i = 0; i < 10; i++){
                         provider.getBlock(blockNumber - i).then(function(block){
                             printBlock(block);
                         });
                     }
                    });
             }

             function getBlock(blockNumber){
                return block;
             }

             function printBlock(block){
                 var table = document.getElementById('blocks')
                 var row = table.insertRow(-1);
                 var cell1 = row.insertCell(0);
                 var cell2 = row.insertCell(1);
                 var cell3 = row.insertCell(2);

                 cell1.innerHTML = block.number;
                 cell2.innerHTML = block.hash;
                 cell3.innerHTML = block.timestamp;
             }
             
        </script>
    </body>
</html>